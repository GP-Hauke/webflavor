var startBtn;function initAssessments(assessmentsContentXML){"undefined"===localStorage&&location.reload();var courseData=JSON.parse(localStorage.getItem(LOCAL_COURSE_DATA_ID));if(void 0===courseData.assessmentData.VERSION||courseData.assessmentData.VERSION!==$(assessmentsContentXML).find("version").text()){courseData.assessmentData.VERSION=$(assessmentsContentXML).find("version").text(),courseData.assessmentData.TOTAL_QUESTIONS=$(assessmentsContentXML).find("question").length,courseData.assessmentData.QUESTIONS_GIVEN=$(assessmentsContentXML).find("assessments").attr("questionsGiven"),courseData.assessmentData.assessments=[];for(var i=0;i<$(assessmentsContentXML).find("assessment").length;i++){var currentAssessment=$(assessmentsContentXML).find("assessment")[i],assessmentObj={id:parseInt($(currentAssessment).attr("id")),completed:$(currentAssessment).attr("completed"),title:$(currentAssessment).attr("title"),introText:$(currentAssessment).find("introText").text(),questionsAnswers:{questions:[],answers:[],answersFiltered:[],feedback:{}},currentQuestionIndex:0};-1!==assessmentObj.title.indexOf("Buick")?assessmentObj.style="buick":-1!==assessmentObj.title.indexOf("Chevrolet")?assessmentObj.style="chevy":-1!==assessmentObj.title.indexOf("GMC")&&(assessmentObj.style="gmc"),assessmentObj.questionsAnswers.feedback.correct=$(currentAssessment).find("correct").text(),assessmentObj.questionsAnswers.feedback.incorrect=$(currentAssessment).find("incorrect").text(),$(currentAssessment).find("question").each(function(){var currentQuestion=$(this),question={TYPE:currentQuestion.attr("type"),REQUIRED:currentQuestion.attr("required"),ANSWERED:currentQuestion.attr("answered"),PASSED:currentQuestion.attr("passed"),SCORE:0,IMAGE:currentQuestion.find("imgSrc").text(),CRITERION:currentQuestion.find("criterion").text(),FILTER:currentQuestion.find("filter").text(),FILTERNUM:currentQuestion.find("filterNum").text(),question:{questionTitle:currentQuestion.find("questionTitle").text(),questionBody:currentQuestion.find("questionBody").text()}};assessmentObj.questionsAnswers.questions.push(question)}),$(currentAssessment).find("answer").each(function(){var currentAnswer=$(this),answer={correct:currentAnswer.attr("correct"),img:currentAnswer.find("modelImgSrc").text(),brand:currentAnswer.find("brand").text(),model:currentAnswer.find("model").text(),attributes:currentAnswer.find("attributes").text(),mpg:(parseInt(currentAnswer.find("mpgCity").text())+parseInt(currentAnswer.find("mpgHighway").text()))/2,rearLegRoom:currentAnswer.find("rearLegRoom").text(),cargoVol:currentAnswer.find("cargoVol").text(),basePrice:currentAnswer.find("basePrice").text(),horsePower:currentAnswer.find("horsePower").text()};assessmentObj.questionsAnswers.answers.push(answer)}),courseData.assessmentData.assessments.push(assessmentObj)}localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData))}}function launchAssessment(id,clickTarget){startBtn=clickTarget;var courseData=JSON.parse(localStorage.getItem(LOCAL_COURSE_DATA_ID)),activeAssessment=id;courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions.length,courseData.assessmentData.assessments[activeAssessment].currentQuestionIndex,courseData.assessmentData.assessments[activeAssessment].completed;0===activeAssessment?($("#modalContainer .assessment-container").append("<div class='selection-screen row'></div>"),$("#modalContainer .selection-screen").append("<div class='col-md-12'><p>Think you know your lineup? Let's see if you can find the best vehicle for the customer. First select the brand you want to view. We'll give you a question regarding a customer's particular interest. You'll be given a choice between two different vehicles. Select the one that best suits your customer's needs. In some cases, BOTH vehicles could meet your customer's needs.</p><p>When you're done, see how you did. And feel free to come back to play again and again. You can use this game to bring you up to speed on the models you sell or as a quick refresher.</p><p>When you're ready, click the <span class='bolded'>brand button</span> and get started.</p></div>"),$("#modalContainer .selection-screen").append("<div class='col-md-4'><button class='d-block mx-auto btn-game buick'><img class='img-fluid' src='../../../dir/media/img/assets/game/game_branch_buick.jpg' alt=''></button></div>"),$("#modalContainer .selection-screen").append("<div class='col-md-4'><button class='d-block mx-auto  btn-game gmc'><img class='img-fluid' src='../../../dir/media/img/assets/game/game_branch_gmc.jpg' alt=''></button></div>"),$("#modalContainer .selection-screen").append("<div class='col-md-4'><button class='d-block mx-auto  btn-game chevy'><img class='img-fluid' src='../../../dir/media/img/assets/game/game_branch_chevy.jpg' alt=''></button></div>"),$("#modalContainer .btn-game.buick").click(function(){$(".selection-screen").remove(),openIntroScreen(0)}),$("#modalContainer .btn-game.gmc").click(function(){$(".selection-screen").remove(),openIntroScreen(1)}),$("#modalContainer .btn-game.chevy").click(function(){$(".selection-screen").remove(),openIntroScreen(2)})):openIntroScreen(3)}function openIntroScreen(id){var courseData=JSON.parse(localStorage.getItem(LOCAL_COURSE_DATA_ID)),activeAssessment=id,style=courseData.assessmentData.assessments[activeAssessment].style;"true"!==courseData.assessmentData.assessments[activeAssessment].completed?(courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions=shuffle(courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions),localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)),$("#modalContainer .assessment-container").append("<div class='intro-screen "+style+"'></div>"),$("#modalContainer .intro-screen").append(courseData.assessmentData.assessments[activeAssessment].introText),$("#modalContainer .intro-screen").append("<button class='btn-start'>NEXT</button>"),$("#modalContainer .btn-start").click(function(){$(".intro-screen").remove(),startAssessment(activeAssessment)})):retryChoice(activeAssessment)}function startAssessment(id){var courseData=JSON.parse(localStorage.getItem(LOCAL_COURSE_DATA_ID)),activeAssessment=id,style=courseData.assessmentData.assessments[activeAssessment].style,questionsNum=courseData.assessmentData.QUESTIONS_GIVEN,questionIndex=courseData.assessmentData.assessments[activeAssessment].currentQuestionIndex,questionCount=questionIndex+1,time=0;courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions=shuffle(courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions);courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[questionIndex].question.questionTitle;var qIndex,questionBody=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[questionIndex].question.questionBody,questionFilter=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[questionIndex].FILTER,filterNum=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[questionIndex].FILTERNUM,answersFiltered=(shuffle(courseData.assessmentData.assessments[activeAssessment].questionsAnswers.answers),courseData.assessmentData.assessments[activeAssessment].questionsAnswers.answers);0<questionFilter.length&&(answersFiltered=filterAnswers(activeAssessment,questionFilter,filterNum)),courseData.assessmentData.assessments[activeAssessment].questionsAnswers.answersFiltered=answersFiltered,$("#modalContainer .assessment-container").append("<div class='assessment-content "+style+" row'></div>"),$("#modalContainer .assessment-content").append("<h3>Question "+questionCount+"<span> 10 seconds</span>"),$("#modalContainer .assessment-content").append("<p>"+questionBody+"</p>"),$("#modalContainer .assessment-content").append("<div class='row mx-auto answers clearfix'></div>");for(var i=0;i<2;i++)$("#modalContainer .answers").append("<div class='col-md-6 answer-container initial btn"+i+"'><div class='unselected-box'></div><div class='border-box'><img class='img-fluid' src='"+answersFiltered[i].img+"'/><div class='brand-model-attr clearfix'><p class='brand'>"+answersFiltered[i].brand+"</p><p class='model'>"+answersFiltered[i].model+"</p><p class='attr'>"+answersFiltered[i].attributes+"</p></div><div class='selected-bar'></div></div></div>");$("#modalContainer .assessment-content").append("<button class='btn-submit-answer'>SUBMIT</button>");for(i=0;i<$("#modalContainer .answer-container").length;i++)$($("#modalContainer .answer-container")[i]).click({questionIndex:questionIndex,answerIndex:i},selectAnswer);function selectAnswer(event){qIndex=event.data.questionIndex,event.data.answerIndex,$("#modalContainer .answer-container").each(function(){$(this).hasClass("initial")&&($(this).removeClass("initial"),$(this).addClass("unselected"))}),$(this).hasClass("selected")?($(this).removeClass("selected"),$(this).addClass("unselected")):($(this).addClass("selected"),$(this).removeClass("unselected"),$(this).siblings().removeClass("selected"),$(this).siblings().addClass("unselected"))}$("#modalContainer .btn-submit-answer").click(function(){var answerSelected=!1;if($("#modalContainer .answer-container").each(function(){$(this).hasClass("selected")&&(answerSelected=!0)}),!1===answerSelected){$("#modalContainer .btn-submit-answer").addClass("d-none"),$("#modalContainer .assessment-content").append("<div class='feedback-container'><p>Please select an answer.</p><div class=''><button class='btn-ok'>OK</button></div></div>"),$("#modalContainer .btn-ok").click(function(){$("#modalContainer .btn-submit-answer").removeClass("d-none"),$("#modalContainer .feedback-container").remove()})}else{clearInterval(timingInterval),$("#modalContainer .answer-container").off(),$("#modalContainer .btn-submit-answer").addClass("d-none");for(var unselectedAnswerData,unselectedAnswer,criterion=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[qIndex].CRITERION,correctlyAnswered=!(courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[qIndex].ANSWERED="true"),selectedAnswersData=[],selectedAnswers=[],i=0;i<$("#modalContainer .answer-container").length;i++)$($("#modalContainer .answer-container")[i]).hasClass("selected")?(selectedAnswersData.push(courseData.assessmentData.assessments[activeAssessment].questionsAnswers.answers[i]),selectedAnswers.push($("#modalContainer .answer-container")[i])):$($("#modalContainer .answer-container")[i]).hasClass("unselected")&&(unselectedAnswerData=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.answers[i],unselectedAnswer=$("#modalContainer .answer-container")[i]);if("cargoVol"===criterion?1<selectedAnswersData.length?selectedAnswersData[0].cargoVol===selectedAnswersData[1].cargoVol&&(correctlyAnswered=!0):parseInt(selectedAnswersData[0].cargoVol)>unselectedAnswerData.cargoVol&&(correctlyAnswered=!0):"mpg"===criterion?1<selectedAnswersData.length?selectedAnswersData[0].mpg===selectedAnswersData[1].mpg&&(correctlyAnswered=!0):parseInt(selectedAnswersData[0].mpg)<unselectedAnswerData.mpg&&(correctlyAnswered=!0):"rearLegRoom"===criterion?1<selectedAnswersData.length?selectedAnswersData[0].rearLegRoom===selectedAnswersData[1].rearLegRoom&&(correctlyAnswered=!0):parseInt(selectedAnswersData[0].rearLegRoom)>unselectedAnswerData.rearLegRoom&&(correctlyAnswered=!0):"horsePower"===criterion?1<selectedAnswersData.length?selectedAnswersData[0].horsePower===selectedAnswersData[1].horsePower&&(correctlyAnswered=!0):parseInt(selectedAnswersData[0].horsePower)>unselectedAnswerData.horsePower&&(correctlyAnswered=!0):"basePrice"===criterion&&(1<selectedAnswersData.length?selectedAnswersData[0].basePrice===selectedAnswersData[1].basePrice&&(correctlyAnswered=!0):parseInt(selectedAnswersData[0].basePrice)<unselectedAnswerData.basePrice&&(correctlyAnswered=!0)),correctlyAnswered){var feedback=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.feedback.correct;courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[qIndex].PASSED="true",localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)),courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[qIndex].SCORE=10-time;for(var i=0;i<selectedAnswers.length;i++)$(selectedAnswers[i]).append("<div class='viewed-overlay'><img src='../../dir/media/img/icon_viewed.png'></div>");$("#modalContainer .assessment-content").append("<div class='feedback-container'><p>"+feedback+"</p><button class='btn-ok'>OK</button></div>"),$("#modalContainer .btn-ok").click(function(){courseData.assessmentData.assessments[activeAssessment].currentQuestionIndex+=1,localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)),$("#modalContainer .assessment-content").remove(),questionIndex===questionsNum-1?(courseData.assessmentData.assessments[activeAssessment].completed="true",localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)),endAssessment(activeAssessment)):startAssessment(activeAssessment)})}else{$(unselectedAnswer).append("<div class='viewed-overlay'><img src='../../dir/media/img/icon_viewed.png'></div>");var feedback=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.feedback.incorrect;qIndex=void 0,$("#modalContainer .assessment-content").append("<div class='feedback-container'><p>"+feedback+"</p><button class='btn-ok'>OK</button></div>"),$("#modalContainer .btn-ok").click(function(){courseData.assessmentData.assessments[activeAssessment].currentQuestionIndex+=1,localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)),$("#modalContainer .assessment-content").remove(),questionIndex===questionsNum-1?(courseData.assessmentData.assessments[activeAssessment].completed="true",localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)),endAssessment(activeAssessment)):startAssessment(activeAssessment)})}}});var timingInterval=setInterval(function(){if(0<=(timeLeft=(10-(time+=.1)).toFixed(0))){var timeLeft=Math.abs(timeLeft);$("#modalContainer .assessment-content h3 span").html("<span> "+timeLeft+" seconds</span>")}},100)}function endAssessment(activeAssessment){void 0!==startBtn&&startBtn.append("<div class='viewed-overlay'><img src='../../../../dir/media/img/icon_viewed.png'></div>");for(var courseData=JSON.parse(localStorage.getItem(LOCAL_COURSE_DATA_ID)),style=courseData.assessmentData.assessments[activeAssessment].style,correctAnswerCount=0,correctPercentage=0,totalScore=0,gameFeedback="",i=0;i<courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions.length;i++)"true"===courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[i].PASSED&&(correctAnswerCount+=1,totalScore+=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[i].SCORE),courseData.assessmentData.assessments[activeAssessment].questionsAnswers.questions[i].PASSED="false";switch(totalScore=totalScore.toFixed(0),correctPercentage=10*correctAnswerCount/courseData.assessmentData.QUESTIONS_GIVEN,correctPercentage=parseInt(correctPercentage.toFixed(0)),$("#modalContainer .assessment-container").append("<div class='finish-screen "+style+"'></div>"),$("#modalContainer .finish-screen").append("<h3>Congratulations!</h3>"),gameFeedback="You answered <span class='bolded'>",gameFeedback+=correctAnswerCount,gameFeedback+="</span> questions correctly. ",gameFeedback+="For a score of <span class='bolded'>",gameFeedback+=totalScore,gameFeedback+="</span> points. ",correctPercentage){case 0:case 1:case 2:case 3:case 4:case 5:gameFeedback+="You probably should go review your product training and then try again.";break;case 6:case 7:case 8:gameFeedback+="You’re on the right track. Keep practicing.";break;case 9:case 10:gameFeedback+="You’re a rock star! You really know the basic differences in the vehicles in your product line. Nice job!"}$("#modalContainer .finish-screen").append("<p>Let’s find out how well you did.</p>"),$("#modalContainer .finish-screen").append("<p>"+gameFeedback+"</p>"),$("#modalContainer .finish-screen").append("<p>Remember, you can come back and play as much as you want. Whether you need a quick refresher or are still learning all the vehicles in your lineup, this game can provide insight into the variety of quality vehicles offered in your inventory.</p>"),$("#modalContainer .finish-screen").append("<p>Click <span class='bolded'>PLAY AGAIN</span> if you want to play again, or <span class='bolded'>CLOSE</span> to exit.</p>"),$("#modalContainer .finish-screen").append("<button class='btn-play-again'>PLAY AGAIN</button>"),$("#modalContainer .finish-screen").append("<button class='btn-close'>CLOSE</button>"),$("#modalContainer .btn-close").click(function(){$(".modal").modal("hide")}),$("#modalContainer .btn-play-again").click(function(){$("#modalContainer .finish-screen").remove(),courseData.assessmentData.assessments[activeAssessment].currentQuestionIndex=0,localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)),launchAssessment(0,void 0)})}function retryChoice(id){var courseData=JSON.parse(localStorage.getItem(LOCAL_COURSE_DATA_ID)),activeAssessment=id,style=courseData.assessmentData.assessments[activeAssessment].style;$("#modalContainer .assessment-container").append("<div class='retry-container "+style+"'></div>"),$("#modalContainer .retry-container").append("<h3>Try again?</h3>"),$("#modalContainer .retry-container").append("<p>You have already completed the game. Would you like to play it again?</p>"),$("#modalContainer .retry-container").append("<button class='btn-try-again'>PLAY AGAIN</button>"),$("#modalContainer .retry-container").append("<button class='btn-close'>CLOSE</button>"),$("#modalContainer .btn-close").click(function(){$(".modal").modal("hide")}),$("#modalContainer .btn-try-again").click(function(){$("#modalContainer .retry-container").remove(),courseData.assessmentData.assessments[activeAssessment].currentQuestionIndex=0,courseData.assessmentData.assessments[activeAssessment].completed="false",localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)),openIntroScreen(activeAssessment)})}function shuffle(array){for(var temporaryValue,randomIndex,currentIndex=array.length;0!==currentIndex;)randomIndex=Math.floor(Math.random()*currentIndex),temporaryValue=array[currentIndex-=1],array[currentIndex]=array[randomIndex],array[randomIndex]=temporaryValue;return array}function filterAnswers(activeAssessment,filter,num){for(var answers=courseData.assessmentData.assessments[activeAssessment].questionsAnswers.answers,answersFiltered=[],i=0;i<answers.length;i++)answers[i][filter]>num&&answersFiltered.push(answers[i]);return answersFiltered}var currentClip,ctrTracker=[];function initAudio(){$("div.caption div").css("display","none");for(var imgBtns=$(".thumbnail img"),i=0;i<imgBtns.length;i++)$(imgBtns[i]).click(playAudioClip)}function playAudioClip(){void 0!==currentClip&&currentClip.pause(),(currentClip=new Audio($(this).data("audio-src"))).play()}function initCardContent(cardContentXML){"undefined"===localStorage&&location.reload();var courseData=JSON.parse(localStorage.getItem(LOCAL_COURSE_DATA_ID));void 0!==courseData.cardData.VERSION&&courseData.cardData.VERSION===$(cardContentXML).find("version").text()||(courseData.cardData.VERSION=$(cardContentXML).find("version").text(),courseData.cardData.TOTAL_ACTIONS=$(cardContentXML).find("action").length,courseData.cardData.cardContent=[],$(cardContentXML).find("cards card").each(function(){var currentCard=$(this),cardContentObject={TYPE:currentCard.attr("type"),cardHeading:currentCard.find("cardHeading").text(),blurb:currentCard.find("cardBlurb").text()};if("popup"===cardContentObject.TYPE){cardContentObject.popupContent=currentCard.find("popupContent").text(),cardContentObject.imgStr=currentCard.find("imgSrc").text();for(var popupsArr=[],count=0;count<currentCard.find("action").length;count++){var popupObj={required:$(this).find("action required")[count].firstChild.data,label:$(this).find("action label")[count].firstChild.data,executed:"false"};popupsArr.push(popupObj)}cardContentObject.actions=popupsArr}else if("text"===cardContentObject.TYPE){cardContentObject.popupContent=currentCard.find("popupContent").text(),cardContentObject.imgStr=currentCard.find("imgSrc").text();for(popupsArr=[],count=0;count<currentCard.find("action").length;count++){popupObj={required:$(this).find("action required")[count].firstChild.data,label:$(this).find("action label")[count].firstChild.data,executed:"false"};popupsArr.push(popupObj)}cardContentObject.actions=popupsArr}else if("links"===cardContentObject.TYPE){cardContentObject.imgStr=currentCard.find("imgSrc").text();var linksArr=[];for(count=0;count<currentCard.find("action").length;count++){var linkObj={urlstr:$(this).find("action link link-url")[count].firstChild.data,label:$(this).find("action label")[count].firstChild.data,executed:"false"};linksArr.push(linkObj)}cardContentObject.actions=linksArr}else if("video"===cardContentObject.TYPE){cardContentObject.vidSrc=currentCard.find("vidSrc").text(),cardContentObject.imgStr=currentCard.find("imgSrc").text(),cardContentObject.posterSrc=currentCard.find("posterSrc").text();var vidClicksArr=[];for(count=0;count<currentCard.find("action").length;count++){var vidClicksObj={required:$(this).find("action required")[count].firstChild.data,label:$(this).find("action label")[count].firstChild.data,executed:"false"};vidClicksArr.push(vidClicksObj)}cardContentObject.actions=vidClicksArr}else if("plain"===cardContentObject.TYPE);else if("page-content"===cardContentObject.TYPE){cardContentObject.popupContent=currentCard.find("popupContent").text(),cardContentObject.imgStr=currentCard.find("imgSrc").text();for(popupsArr=[],count=0;count<currentCard.find("action").length;count++){popupObj={required:$(this).find("action required")[count].firstChild.data,label:$(this).find("action label")[count].firstChild.data,executed:"false"};popupsArr.push(popupObj)}cardContentObject.actions=popupsArr}courseData.cardData.cardContent.push(cardContentObject)}),localStorage.setItem(LOCAL_COURSE_DATA_ID,JSON.stringify(courseData)))}ctrTracker=[];function initCTR(){$("div.caption div").css("display","none");for(var ctrs=$(".thumbnail"),i=0;i<ctrs.length;i++)ctrNum=parseInt(ctrs[i].id),$("#"+ctrNum).click(function(evt){$(this).find("div.caption h3").addClass("clicked"),$(this).find(".loading-cover").addClass("hidden"),$(this).find("div.caption div").show(300);var lockCheck=window.parent.chapters[window.parent.currentChapter].pages[window.parent.currentPage].locks,lockNum=ctrTracker.length;0<=lockNum&&-1!==lockCheck.indexOf(0)&&(window.parent.openLock(window.parent.currentChapter,window.parent.currentPage,lockNum),ctrTracker.pop())}),ctrTracker[i]=i}function Glossary(xml){this.items=[],this.notFound=new item(xml.getElementsByTagName("notFound")[0]);for(var i=0;i<xml.getElementsByTagName("item").length;i++)this.items.push(new item(xml.getElementsByTagName("item")[i]));this.items.sort(function(a,b){return a.term.localeCompare(b.term)}),this.getItemById=function(args){for(var i=0;i<this.items.length;i++)if(this.items[i].id==args)return this.items[i];return this.notFound},this.populateGlossary=function(){for(var letter="",i=0;i<this.items.length;i++)letter!=this.items[i].term.charAt(0).toUpperCase()&&(letter=this.items[i].term.charAt(0).toUpperCase(),$("#glossaryLetters").append('<div id="glossButton_'+letter+'" class="glossaryLetter" onclick="scrollGloss(\''+letter+"')\">"+letter+"</div>"),$("#glossaryHolder").append('<div id="gloss_'+letter+'"></div>')),""!=this.items[i].audio?$("#glossaryHolder").append('<div data-role="collapsible" class="glossaryDefinition"><h3 class="glossaryTerm">'+this.items[i].term+"</h3><p>"+this.items[i].definition+'</p><a class="glossaryPlayIcon" href="javascript:void(0)" onclick="glossary.playTerm(\''+this.items[i].audio+'\')"><img src="includes/css/images/audio_icon.jpg"/></a></div>'):$("#glossaryHolder").append('<div data-role="collapsible" class="glossaryDefinition"><h3 class="glossaryTerm">'+this.items[i].term+"</h3><p>"+this.items[i].definition+"</p></div>")},this.playTerm=function(src){document.getElementById("glossaryPlayer").src="media/glossaryAudio/"+src,document.getElementById("glossaryPlayer").play()}}function item(xml){this.term=xml.getElementsByTagName("term")[0].childNodes[0].nodeValue,this.definition=xml.getElementsByTagName("definition")[0].childNodes[0].nodeValue,this.id=xml.getAttribute("id"),this.audio=xml.getAttribute("audio")}function openModal(modalType,assessmentID,clickTarget){JSON.parse(localStorage.getItem(LOCAL_COURSE_DATA_ID)).THEME_PATH;switch(modalType){case"splashPage":$("#modalContainer").html(getSplashPage());break;case"glossary":$("#modalContainer").html(getGlossary()),glossaryNavigate();break;case"help":$("#modalContainer").html(getHelpPage());break;case"assessment":$("#modalContainer").html(getAssessment()),launchAssessment(assessmentID,clickTarget)}$(".modal").on("shown.bs.modal",function(e){$(".modal .modal-body").css({height:$(".modal").height()})}),$(".modal").on("hidden.bs.modal",function(e){$("#modalContainer").html("")}),$(".modal").modal()}function openContentModal(heading,content){$("#modalContainer").html('<div class="modal fade" id="contentModal" tabindex="-1" role="dialog" aria-labelledby="contentModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><img src="'+pathStr+'/resouces/img/btn_close.png" alt="close the modal"></span></button><h4 class="modal-title" id="">'+heading+'</h4></div><div class="modal-body clearfix">'+content+"</div></div></div></div>"),$(".modal").on("hidden.bs.modal",function(e){$("#modalContainer").html("")}),$(".modal").modal()}function openVidModal(heading,vidSrc,posterSrc){$("#modalContainer").html("<div class='modal fade' id='vidModal' tabindex='-1' role='dialog' aria-labelledby='vidModalLabel'><div class='modal-dialog' role='document'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'><img src='"+pathStr+"/media/img/btn_close.png' alt='close the modal'></span></button><h4 class='modal-title' id=''>"+heading+"</h4></div><div class='modal-body clearfix'><video id='' src='"+vidSrc+"' preload='none' controls poster='"+posterSrc+"'>Sorry, your browser doesn't support embedded videos, but don't worry, you can <a href=''>download it</a> and watch it with your favorite video player!</video></div></div></div></div>"),$(".modal").on("hidden.bs.modal",function(e){$("#modalContainer").html("")}),$(".modal").modal()}function getSplashPage(){return'<div class="modal" id="splashPageModal" tabindex="-1" role="dialog" aria-labelledby="splashPageModalLabel"><div class="modal-dialog" role="document" style="max-width: 1000px"><div class="modal-content"><div class="row"><div class="col-md-12"><img class="img-fluid mx-auto d-block" data-dismiss="modal" src="dir/media/img/assets/00_splash_lg.jpg" alt="splash page image"><img class="img-fluid mx-auto d-none" data-dismiss="modal" src="dir/media/img/assets/00_splash_sm.jpg" alt="splash page image"></div></div></div></div></div><audio autoplay><source src="../../dir/media/audio/0.mp3"/></audio>'}function getGlossary(){var glossary='<div class="modal fade" id="glossaryModal" tabindex="-1" role="dialog" aria-labelledby="glossaryModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><div class="modal-title-wrapper"><h4 class="modal-title" id="glossaryModalLabel">GLOSSARY</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><img src="dir/media/img/btn_close_glossary.png" alt="close the glossary"></span></button></div><div class="alphabet"><a id="" href="#">a</a><a id="" href="#">b</a><a id="" href="#">c</a><a id="" href="#">d</a><a id="" href="#">e</a><a id="" href="#">f</a><a id="" href="#">g</a><a id="" href="#">h</a><a id="" href="#">i</a><a id="" href="#">j</a><a id="" href="#">k</a><a id="" href="#">l</a><a id="" href="#">m</a><a id="" href="#">n</a><a id="" href="#">o</a><a id="" href="#">p</a><a id="" href="#">q</a><a id="" href="#">r</a><a id="" href="#">s</a><a id="" href="#">t</a><a id="" href="#">u</a><a id="" href="#">v</a><a id="" href="#">w</a><a id="" href="#">x</a><a id="" href="#">y</a><a id="" href="#">z</a></div></div><div class="modal-body">';for(i=0;i<courseData.glossary.items.length;i++){var term=courseData.glossary.items[i].term,def=courseData.glossary.items[i].definition;glossary+='<div class="gloss-item" id="'+term.charAt(0)+'"><h5>'+term+"</h5><p>"+def+"</p></div>"}return glossary+="</div></div></div></div>"}function glossaryNavigate(){$(".alphabet a").click(function(){var c="#"+$(this).text();(140<$(c).offset().top||$(c).offset().top<120)&&($(".modal-body").scrollTop(0),$(".modal-body").animate({scrollTop:$(c).offset().top-130}))})}function getHelpPage(){return'<div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby=""><div class="modal-dialog" style="max-width:none" role="document"><div class="modal-content"><div class="modal-header"><h4 class="modal-title" id="helpModalLabel">HELP</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><img src="dir/media/img/btn_close_help.png" alt="close the help page"></span></button></div><div class="modal-body"><div class="help-section"><h5>NAVIGATION</h5><div class="help-item"><h6>TABLE OF CONTENTS</h6><img src="dir/media/img/help_toc.png" alt="t.o.c. icon"/><p>Use this to navigate to different pages in the course.</p></div><div class="help-item"><h6>CONTENT AREA</h6><p>Content will appear here. Follow the on-screen instructions for videos or interactives. Some pages may scroll.</p></div><div class="help-item"><h6>PAGE COUNT</h6><img src="dir/media/img/help_page_count.png" alt="page count screen shot"/><p>Check your progress through the course.</p></div><div class="help-item"><h6>BACK/NEXT BUTTONS</h6><img src="dir/media/img/help_back_next.png" alt="page count screen shot"/><p>Use these buttons to move forward or backward in the course.</p></div></div><div class="help-section"><h5>HELP</h5><div class="help-item"><h6>HELP</h6><img src="dir/media/img/help_help.png" alt="page count screen shot"/><p>This page describes how to use the course.</p></div></div></div></div></div></div>'}function getAssessment(){return'<div class="modal" id="assessmentModal" tabindex="-1" role="dialog" aria-labelledby="assessmentModalLabel" data-backdrop="static"><div class="modal-dialog" role="document" style="max-width: 1000px"><div class="modal-content"><div class="row"><div class="col-md-12 assessment-container"></div></div></div></div></div>'}var lockTracker=[];function initVideo(){vids=$("video");for(var i=0;i<vids.length;i++)lockTracker[i]=i,vidNum=parseInt(vids[i].id),$("#"+vidNum).attr("poster","../resources/media/img/video_poster_"+vidNum+".jpg"),$("#"+vidNum).hover(vidOverHandler,vidOutHandler),$("#"+vidNum).click(function(){vidClickHandler($(this))}),$("#"+vidNum)[0].onplay=function(){window.parent.openLock(window.parent.currentChapter,window.parent.currentPage,lockTracker.length),lockTracker.pop()}}function vidOverHandler(){var imgNum=$(this).attr("id");$(this).attr("poster","../resources/media/img/video_poster_hover_"+imgNum+".jpg")}function vidOutHandler(){var imgNum=$(this).attr("id");$(this).attr("poster","../resources/media/img/video_poster_"+imgNum+".jpg")}function vidClickHandler(obj){obj.get(0).play()}